<%= form_for(@factura, html: { class: "form-horizontal", role: "form" }) do |f| %>
  <% if @factura.errors.any? %>
    <div class="alert alert-danger alert-dismissable" role="alert">
      <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      <h4><%= pluralize(@factura.errors.count, "error") %> La factura no pudo realizarse por:</h4>

      <ul>
      <% @factura.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


  <div class="form-group">
    <%= f.label :cuit, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.number_field :cuit, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :fecha, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.datetime_select :fecha, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :control, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :control, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :vendedor, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :vendedor, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :subtotal, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :subtotal, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :bonificacion, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :bonificacion, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :neto, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :neto, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :iva, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :iva, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :iibb, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :iibb, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :total, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :total, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :cae, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :cae, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :vencimiento_cae, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :vencimiento_cae, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :pto_venta, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.number_field :pto_venta, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :numero, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.number_field :numero, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :tipo, class: "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :tipo, class: "form-control" %>
    </div>
  </div>



<div class="tabla-responsive-vertical shadow-z-1">
  <table class="tabla tabla-hover">
      <% if @factura.new_record? %>
        <% if @factura %>
            <thead>
              <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>IVA</th>
              <th>Neto</th>
              <th>Descuento</th>
              <th>Subtotal</th>
            </tr>
            </thead>
            <tbody>
              <%= f.fields_for :factura_items do |ff| %>
                  <% render 'detalle', f: ff %>
              <% end %>
            <% else %>
            <thead>
              <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Stock disponible</th>
            </tr>
            </thead>
            <tbody>
              <%= f.fields_for :factura_items do |ff| %>
                  <% render 'detalle_sin_remitos', f: ff %>
              <% end %>

              <% end %>
      <% end %>
        </tbody>
          </table>
        </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <%= f.submit class: "btn btn-primary" %>
      <%= link_to facturas_path, class: 'btn btn-default pull-right' do %>
          Cancelar
      <% end -%>
    </div>
  </div>
<% end %>

